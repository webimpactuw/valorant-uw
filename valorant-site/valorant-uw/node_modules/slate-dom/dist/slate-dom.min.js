!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("slate")):"function"==typeof define&&define.amd?define(["exports","slate"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).SlateDom={},t.Slate)}(this,(function(t,e){"use strict";function n(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function r(t,e){return t(e={exports:{}},e.exports),e.exports}var o=r((function(t){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r},t.exports.__esModule=!0,t.exports.default=t.exports}));n(o);var a=r((function(t){t.exports=function(t){if(Array.isArray(t))return o(t)},t.exports.__esModule=!0,t.exports.default=t.exports}));n(a);var i=r((function(t){t.exports=function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.__esModule=!0,t.exports.default=t.exports}));n(i);var l=r((function(t){t.exports=function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports}));n(l);var s=r((function(t){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports}));n(s);var d=n(r((function(t){t.exports=function(t){return a(t)||i(t)||l(t)||s()},t.exports.__esModule=!0,t.exports.default=t.exports}))),f=r((function(t){t.exports=function(t){if(Array.isArray(t))return t},t.exports.__esModule=!0,t.exports.default=t.exports}));n(f);var u=r((function(t){t.exports=function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,l=[],s=!0,d=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);s=!0);}catch(t){d=!0,o=t}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(d)throw o}}return l}},t.exports.__esModule=!0,t.exports.default=t.exports}));n(u);var c=r((function(t){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports}));n(c);var h=n(r((function(t){t.exports=function(t,e){return f(t)||u(t,e)||l(t,e)||c()},t.exports.__esModule=!0,t.exports.default=t.exports})));function p(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return g(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){l=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var v,m,w=globalThis.Node,y=globalThis.Element,x=globalThis.Text,E=globalThis.Range,b=globalThis.Selection,O=globalThis.StaticRange,M=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||null},S=function(t){return _(t)&&1===t.nodeType},_=function(t){var e=M(t);return!!e&&t instanceof e.Node},D=function(t){var e=t&&t.anchorNode&&M(t.anchorNode);return!!e&&t instanceof e.Selection},k=function(t){return _(t)&&3===t.nodeType},T=function(t){var e=h(t,2),n=e[0],r=e[1];if(S(n)&&n.childNodes.length){var o=r===n.childNodes.length,a=o?r-1:r,i=N(n,a,o?"backward":"forward"),l=h(i,2);for(n=l[0],o=(a=l[1])<r;S(n)&&n.childNodes.length;){var s=o?n.childNodes.length-1:0;n=R(n,s,o?"backward":"forward")}r=o&&null!=n.textContent?n.textContent.length:0}return[n,r]},C=function(t){for(var e=t&&t.parentNode;e;){if("[object ShadowRoot]"===e.toString())return!0;e=e.parentNode}return!1},N=function(t,e,n){for(var r,o=t.childNodes,a=o[e],i=e,l=!1,s=!1;(_(r=a)&&8===r.nodeType||S(a)&&0===a.childNodes.length||S(a)&&"false"===a.getAttribute("contenteditable"))&&(!l||!s);)i>=o.length?(l=!0,i=e-1,n="backward"):i<0?(s=!0,i=e+1,n="forward"):(a=o[i],e=i,i+="forward"===n?1:-1);return[a,e]},R=function(t,e,n){var r=N(t,e,n);return h(r,1)[0]},P=function t(e){var n="";if(k(e)&&e.nodeValue)return e.nodeValue;if(S(e)){for(var r=0,o=Array.from(e.childNodes);r<o.length;r++){n+=t(o[r])}var a=getComputedStyle(e).getPropertyValue("display");"block"!==a&&"list"!==a&&"BR"!==e.tagName||(n+="\n")}return n},A=/data-slate-fragment="(.+?)"/m,I=function(t){var e=t.getData("text/html").match(A)||[];return h(e,2)[1]},W=function(t){return null!=t.getSelection?t.getSelection():document.getSelection()},B=function(t,e){return Boolean(t.compareDocumentPosition(e)&w.DOCUMENT_POSITION_PRECEDING)},F=function(t,e){return Boolean(t.compareDocumentPosition(e)&w.DOCUMENT_POSITION_FOLLOWING)},L="undefined"!=typeof navigator&&"undefined"!=typeof window&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,j="undefined"!=typeof navigator&&/Mac OS X/.test(navigator.userAgent),H="undefined"!=typeof navigator&&/Android/.test(navigator.userAgent),K="undefined"!=typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),U="undefined"!=typeof navigator&&/AppleWebKit(?!.*Chrome)/i.test(navigator.userAgent),q="undefined"!=typeof navigator&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),z="undefined"!=typeof navigator&&/Chrome/i.test(navigator.userAgent),V="undefined"!=typeof navigator&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),G=H&&"undefined"!=typeof navigator&&/Chrome?\/(?:[0-5]?\d)(?:\.)/i.test(navigator.userAgent),Y="undefined"!=typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),X="undefined"!=typeof navigator&&/.*UCBrowser/.test(navigator.userAgent),$="undefined"!=typeof navigator&&/.*Wechat/.test(navigator.userAgent)&&!/.*MacWechat/.test(navigator.userAgent),J=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement);"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&/Version\/(\d+)/.test(navigator.userAgent)&&null!==(v=navigator.userAgent.match(/Version\/(\d+)/))&&void 0!==v&&v[1]&&parseInt(null===(m=navigator.userAgent.match(/Version\/(\d+)/))||void 0===m?void 0:m[1],10);var Q=(!V||!G)&&!q&&"undefined"!=typeof globalThis&&globalThis.InputEvent&&"function"==typeof globalThis.InputEvent.prototype.getTargetRanges,Z=r((function(t){function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}));n(Z);var tt=r((function(t){var e=Z.default;t.exports=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,n||"default");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)},t.exports.__esModule=!0,t.exports.default=t.exports}));n(tt);var et=r((function(t){var e=Z.default;t.exports=function(t){var n=tt(t,"string");return"symbol"===e(n)?n:String(n)},t.exports.__esModule=!0,t.exports.default=t.exports}));n(et);var nt=n(r((function(t){function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,et(r.key),r)}}t.exports=function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports}))),rt=n(r((function(t){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports}))),ot=n(r((function(t){t.exports=function(t,e,n){return(e=et(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.__esModule=!0,t.exports.default=t.exports}))),at=0,it=nt((function t(){rt(this,t),ot(this,"id",void 0),this.id="".concat(at++)})),lt=new WeakMap,st=new WeakMap,dt=new WeakMap,ft=new WeakMap,ut=new WeakMap,ct=new WeakMap,ht=new WeakMap,pt=new WeakMap,gt=new WeakMap,vt=new WeakMap,mt=new WeakMap,wt=new WeakMap,yt=new WeakMap,xt=new WeakMap,Et=new WeakMap,bt=new WeakMap,Ot=new WeakMap,Mt=new WeakMap,St=new WeakMap,_t=new WeakMap,Dt=new WeakMap,kt=new WeakMap,Tt=Symbol("placeholder"),Ct=Symbol("mark-placeholder"),Nt={androidPendingDiffs:function(t){return St.get(t)},androidScheduleFlush:function(t){var e;null===(e=bt.get(t))||void 0===e||e()},blur:function(t){var e=Nt.toDOMNode(t,t),n=Nt.findDocumentOrShadowRoot(t);wt.set(t,!1),n.activeElement===e&&e.blur()},deselect:function(t){var n=t.selection,r=Nt.findDocumentOrShadowRoot(t),o=W(r);o&&o.rangeCount>0&&o.removeAllRanges(),n&&e.Transforms.deselect(t)},findDocumentOrShadowRoot:function(t){var e=Nt.toDOMNode(t,t),n=e.getRootNode();return n instanceof Document||n instanceof ShadowRoot?n:e.ownerDocument},findEventRange:function(t,n){"nativeEvent"in n&&(n=n.nativeEvent);var r=n,o=r.clientX,a=r.clientY,i=r.target;if(null==o||null==a)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(n));var l,s=Nt.toSlateNode(t,n.target),d=Nt.findPath(t,s);if(e.Element.isElement(s)&&e.Editor.isVoid(t,s)){var f=i.getBoundingClientRect(),u=t.isInline(s)?o-f.left<f.left+f.width-o:a-f.top<f.top+f.height-a,c=e.Editor.point(t,d,{edge:u?"start":"end"}),h=u?e.Editor.before(t,c):e.Editor.after(t,c);if(h)return e.Editor.range(t,h)}var p=Nt.getWindow(t).document;if(p.caretRangeFromPoint)l=p.caretRangeFromPoint(o,a);else{var g=p.caretPositionFromPoint(o,a);g&&((l=p.createRange()).setStart(g.offsetNode,g.offset),l.setEnd(g.offsetNode,g.offset))}if(!l)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(n));return Nt.toSlateRange(t,l,{exactMatch:!1,suppressThrow:!1})},findKey:function(t,e){var n=gt.get(e);return n||(n=new it,gt.set(e,n)),n},findPath:function(t,n){for(var r=[],o=n;;){var a=dt.get(o);if(null==a){if(e.Editor.isEditor(o))return r;break}var i=st.get(o);if(null==i)break;r.unshift(i),o=a}throw new Error("Unable to find the path for Slate node: ".concat(e.Scrubber.stringify(n)))},focus:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{retries:5};if(!wt.get(t)){if(n.retries<=0)throw new Error("Could not set focus, editor seems stuck with pending operations");if(t.operations.length>0)setTimeout((function(){Nt.focus(t,{retries:n.retries-1})}),10);else{var r=Nt.toDOMNode(t,t),o=Nt.findDocumentOrShadowRoot(t);if(o.activeElement!==r){if(t.selection&&o instanceof Document){var a=W(o),i=Nt.toDOMRange(t,t.selection);null==a||a.removeAllRanges(),null==a||a.addRange(i)}t.selection||e.Transforms.select(t,e.Editor.start(t,[])),wt.set(t,!0),r.focus({preventScroll:!0})}}}},getWindow:function(t){var e=ft.get(t);if(!e)throw new Error("Unable to find a host window element for this editor");return e},hasDOMNode:function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=r.editable,a=void 0!==o&&o,i=Nt.toDOMNode(t,t);try{n=S(e)?e:e.parentElement}catch(t){if(t instanceof Error&&!t.message.includes('Permission denied to access property "nodeType"'))throw t}return!!n&&!(n.closest("[data-slate-editor]")!==i||a&&!n.isContentEditable&&("boolean"!=typeof n.isContentEditable||n.closest('[contenteditable="false"]')!==i)&&!n.getAttribute("data-slate-zero-width"))},hasEditableTarget:function(t,e){return _(e)&&Nt.hasDOMNode(t,e,{editable:!0})},hasRange:function(t,n){var r=n.anchor,o=n.focus;return e.Editor.hasPath(t,r.path)&&e.Editor.hasPath(t,o.path)},hasSelectableTarget:function(t,e){return Nt.hasEditableTarget(t,e)||Nt.isTargetInsideNonReadonlyVoid(t,e)},hasTarget:function(t,e){return _(e)&&Nt.hasDOMNode(t,e)},insertData:function(t,e){t.insertData(e)},insertFragmentData:function(t,e){return t.insertFragmentData(e)},insertTextData:function(t,e){return t.insertTextData(e)},isComposing:function(t){return!!yt.get(t)},isFocused:function(t){return!!wt.get(t)},isReadOnly:function(t){return!!mt.get(t)},isTargetInsideNonReadonlyVoid:function(t,n){if(mt.get(t))return!1;var r=Nt.hasTarget(t,n)&&Nt.toSlateNode(t,n);return e.Element.isElement(r)&&e.Editor.isVoid(t,r)},setFragmentData:function(t,e,n){return t.setFragmentData(e,n)},toDOMNode:function(t,n){var r=vt.get(t),o=e.Editor.isEditor(n)?ut.get(t):null==r?void 0:r.get(Nt.findKey(t,n));if(!o)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(e.Scrubber.stringify(n)));return o},toDOMPoint:function(t,n){var r,o=e.Editor.node(t,n.path),a=h(o,1)[0],i=Nt.toDOMNode(t,a);e.Editor.void(t,{at:n})&&(n={path:n.path,offset:0});for(var l=Array.from(i.querySelectorAll("[data-slate-string], [data-slate-zero-width]")),s=0,d=0;d<l.length;d++){var f=l[d],u=f.childNodes[0];if(null!=u&&null!=u.textContent){var c=u.textContent.length,p=f.getAttribute("data-slate-length"),g=s+(null==p?c:parseInt(p,10)),v=l[d+1];if(n.offset===g&&null!=v&&v.hasAttribute("data-slate-mark-placeholder")){var m,w=v.childNodes[0];r=[w instanceof x?w:v,null!==(m=v.textContent)&&void 0!==m&&m.startsWith("\ufeff")?1:0];break}if(n.offset<=g){r=[u,Math.min(c,Math.max(0,n.offset-s))];break}s=g}}if(!r)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(e.Scrubber.stringify(n)));return r},toDOMRange:function(t,n){var r=n.anchor,o=n.focus,a=e.Range.isBackward(n),i=Nt.toDOMPoint(t,r),l=e.Range.isCollapsed(n)?i:Nt.toDOMPoint(t,o),s=Nt.getWindow(t).document.createRange(),d=h(a?l:i,2),f=d[0],u=d[1],c=h(a?i:l,2),p=c[0],g=c[1],v=!!(S(f)?f:f.parentElement).getAttribute("data-slate-zero-width"),m=!!(S(p)?p:p.parentElement).getAttribute("data-slate-zero-width");return s.setStart(f,v?1:u),s.setEnd(p,m?1:g),s},toSlateNode:function(t,e){var n=S(e)?e:e.parentElement;n&&!n.hasAttribute("data-slate-node")&&(n=n.closest("[data-slate-node]"));var r=n?ht.get(n):null;if(!r)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(n));return r},toSlatePoint:function(t,n,r){var o=r.exactMatch,a=r.suppressThrow,i=r.searchDirection,l=void 0===i?"backward":i,s=o?n:T(n),f=h(s,2),u=f[0],c=f[1],p=u.parentNode,g=null,v=0;if(p){var m,w,y=Nt.toDOMNode(t,t),x=p.closest('[data-slate-void="true"]'),E=x&&y.contains(x)?x:null,b=p.closest('[contenteditable="false"]'),O=b&&y.contains(b)?b:null,M=p.closest("[data-slate-leaf]"),S=null;if(M){if(g=M.closest('[data-slate-node="text"]')){var _=Nt.getWindow(t).document.createRange();_.setStart(g,0),_.setEnd(u,c);var D=_.cloneContents();[].concat(d(Array.prototype.slice.call(D.querySelectorAll("[data-slate-zero-width]"))),d(Array.prototype.slice.call(D.querySelectorAll("[contenteditable=false]")))).forEach((function(t){H&&!o&&t.hasAttribute("data-slate-zero-width")&&t.textContent.length>0&&"\ufeff"!==t.textContext?t.textContent.startsWith("\ufeff")&&(t.textContent=t.textContent.slice(1)):t.parentNode.removeChild(t)})),v=D.textContent.length,S=g}}else if(E){for(var k=E.querySelectorAll("[data-slate-leaf]"),C=0;C<k.length;C++){var N=k[C];if(Nt.hasDOMNode(t,N)){M=N;break}}M?(g=M.closest('[data-slate-node="text"]'),v=(S=M).textContent.length,S.querySelectorAll("[data-slate-zero-width]").forEach((function(t){v-=t.textContent.length}))):v=1}else if(O){var R,P,A=function(t){return t?t.querySelectorAll("[data-slate-leaf]:not(:scope [data-slate-editor] [data-slate-leaf])"):[]},I=O.closest('[data-slate-node="element"]');if("forward"===l)M=null!==(R=[].concat(d(A(I)),d(A(null==I?void 0:I.nextElementSibling))).find((function(t){return F(O,t)})))&&void 0!==R?R:null;else M=null!==(P=[].concat(d(A(null==I?void 0:I.previousElementSibling)),d(A(I))).findLast((function(t){return B(O,t)})))&&void 0!==P?P:null;M&&(g=M.closest('[data-slate-node="text"]'),S=M,"forward"===l?v=0:(v=S.textContent.length,S.querySelectorAll("[data-slate-zero-width]").forEach((function(t){v-=t.textContent.length}))))}S&&v===S.textContent.length&&H&&"z"===S.getAttribute("data-slate-zero-width")&&null!==(m=S.textContent)&&void 0!==m&&m.startsWith("\ufeff")&&(p.hasAttribute("data-slate-zero-width")||K&&null!==(w=S.textContent)&&void 0!==w&&w.endsWith("\n\n"))&&v--}if(H&&!g&&!o){var W=p.hasAttribute("data-slate-node")?p:p.closest("[data-slate-node]");if(W&&Nt.hasDOMNode(t,W,{editable:!0})){var L=Nt.toSlateNode(t,W),j=e.Editor.start(t,Nt.findPath(t,L)),U=j.path,q=j.offset;return W.querySelector("[data-slate-leaf]")||(q=c),{path:U,offset:q}}}if(!g){if(a)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(n))}var z=Nt.toSlateNode(t,g);return{path:Nt.findPath(t,z),offset:v}},toSlateRange:function(t,n,r){var o,a,i,l,s,d,f=r.exactMatch,u=r.suppressThrow;if(D(n)?n.anchorNode:n.startContainer)if(D(n)){if(K&&n.rangeCount>1){l=n.focusNode;var c=n.getRangeAt(0),h=n.getRangeAt(n.rangeCount-1);if(l instanceof HTMLTableRowElement&&c.startContainer instanceof HTMLTableRowElement&&h.startContainer instanceof HTMLTableRowElement){var p=function t(e){return e.childElementCount>0?t(e.children[0]):e},g=c.startContainer,v=h.startContainer,m=p(g.children[c.startOffset]),w=p(v.children[h.startOffset]);s=0,a=w.childNodes.length>0?w.childNodes[0]:w,l=m.childNodes.length>0?m.childNodes[0]:m,i=w instanceof HTMLElement?w.innerHTML.length:0}else c.startContainer===l?(a=h.endContainer,i=h.endOffset,s=c.startOffset):(a=c.startContainer,i=c.endOffset,s=h.startOffset)}else a=n.anchorNode,i=n.anchorOffset,l=n.focusNode,s=n.focusOffset;d=z&&C(a)||K?n.anchorNode===n.focusNode&&n.anchorOffset===n.focusOffset:n.isCollapsed}else a=n.startContainer,i=n.startOffset,l=n.endContainer,s=n.endOffset,d=n.collapsed;if(null==a||null==l||null==i||null==s)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(n));K&&null!==(o=l.textContent)&&void 0!==o&&o.endsWith("\n\n")&&s===l.textContent.length&&s--;var y=Nt.toSlatePoint(t,[a,i],{exactMatch:f,suppressThrow:u});if(!y)return null;var x=B(a,l)||a===l&&s<i,E=d?y:Nt.toSlatePoint(t,[l,s],{exactMatch:f,suppressThrow:u,searchDirection:x?"forward":"backward"});if(!E)return null;var b={anchor:y,focus:E};return e.Range.isExpanded(b)&&e.Range.isForward(b)&&S(l)&&e.Editor.void(t,{at:b.focus,mode:"highest"})&&(b=e.Editor.unhangRange(t,b,{voids:!0})),b}};function Rt(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.reduce((function(t,e){return t.slice(0,e.start)+e.text+t.slice(e.end)}),t)}function Pt(t,e){var n=e.start,r=e.end,o=e.text,a=t.slice(n,r),i=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++)if(t.charAt(r)!==e.charAt(r))return r;return n}(a,o),l=function(t,e,n){for(var r=Math.min(t.length,e.length,n),o=0;o<r;o++)if(t.charAt(t.length-o-1)!==e.charAt(e.length-o-1))return o;return r}(a,o,Math.min(a.length-i,o.length-i)),s={start:n+i,end:r-l,text:o.slice(i,o.length-l)};return s.start===s.end&&0===s.text.length?null:s}function At(t,n){var r=n.path,o=n.offset;if(!e.Editor.hasPath(t,r))return null;var a=e.Node.get(t,r);if(!e.Text.isText(a))return null;var i=e.Editor.above(t,{match:function(n){return e.Element.isElement(n)&&e.Editor.isBlock(t,n)},at:r});if(!i)return null;for(;o>a.text.length;){var l=e.Editor.next(t,{at:r,match:e.Text.isText});if(!l||!e.Path.isDescendant(l[1],i[1]))return null;o-=a.text.length,a=l[0],r=l[1]}return{path:r,offset:o}}function It(t,n,r){var o=St.get(t),a=null==o?void 0:o.find((function(t){var r=t.path;return e.Path.equals(r,n.path)}));if(!a||n.offset<=a.diff.start)return e.Point.transform(n,r,{affinity:"backward"});var i=a.diff;if(n.offset<=i.start+i.text.length){var l={path:n.path,offset:i.start},s=e.Point.transform(l,r,{affinity:"backward"});return s?{path:s.path,offset:s.offset+n.offset-i.start}:null}var d={path:n.path,offset:n.offset-i.text.length+i.end-i.start},f=e.Point.transform(d,r,{affinity:"backward"});return f?"split_node"===r.type&&e.Path.equals(r.path,n.path)&&d.offset<r.position&&i.start<r.position?f:{path:f.path,offset:f.offset+i.text.length-i.end+i.start}:null}function Wt(t,n,r){var o=It(t,n.anchor,r);if(!o)return null;if(e.Range.isCollapsed(n))return{anchor:o,focus:o};var a=It(t,n.focus,r);return a?{anchor:o,focus:a}:null}function Bt(t,n){var r=t.path,o=t.diff,a=t.id;switch(n.type){case"insert_text":return!e.Path.equals(n.path,r)||n.offset>=o.end?t:n.offset<=o.start?{diff:{start:n.text.length+o.start,end:n.text.length+o.end,text:o.text},id:a,path:r}:{diff:{start:o.start,end:o.end+n.text.length,text:o.text},id:a,path:r};case"remove_text":return!e.Path.equals(n.path,r)||n.offset>=o.end?t:n.offset+n.text.length<=o.start?{diff:{start:o.start-n.text.length,end:o.end-n.text.length,text:o.text},id:a,path:r}:{diff:{start:o.start,end:o.end-n.text.length,text:o.text},id:a,path:r};case"split_node":return!e.Path.equals(n.path,r)||n.position>=o.end?{diff:o,id:a,path:e.Path.transform(r,n,{affinity:"backward"})}:n.position>o.start?{diff:{start:o.start,end:Math.min(n.position,o.end),text:o.text},id:a,path:r}:{diff:{start:o.start-n.position,end:o.end-n.position,text:o.text},id:a,path:e.Path.transform(r,n,{affinity:"forward"})};case"merge_node":return e.Path.equals(n.path,r)?{diff:{start:o.start+n.position,end:o.end+n.position,text:o.text},id:a,path:e.Path.transform(r,n)}:{diff:o,id:a,path:e.Path.transform(r,n)}}var i=e.Path.transform(r,n);return i?{diff:o,path:i,id:a}:null}var Ft=function(t,e){var n=(e.top+e.bottom)/2;return t.top<=n&&t.bottom>=n},Lt=function(t,e,n){var r=Nt.toDOMRange(t,e).getBoundingClientRect(),o=Nt.toDOMRange(t,n).getBoundingClientRect();return Ft(r,o)&&Ft(o,r)},jt=function(t,n){var r=e.Editor.range(t,e.Range.end(n)),o=Array.from(e.Editor.positions(t,{at:n})),a=0,i=o.length,l=Math.floor(i/2);if(Lt(t,e.Editor.range(t,o[a]),r))return e.Editor.range(t,o[a],r);if(o.length<2)return e.Editor.range(t,o[o.length-1],r);for(;l!==o.length&&l!==a;)Lt(t,e.Editor.range(t,o[l]),r)?i=l:a=l,l=Math.floor((a+i)/2);return e.Editor.range(t,o[i],r)};function Ht(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Kt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){l=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function Kt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ut(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function qt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ut(Object(n),!0).forEach((function(e){ot(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ut(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var zt=function(t,n){var r,o=[],a=Ht(e.Editor.levels(t,{at:n}));try{for(a.s();!(r=a.n()).done;){var i=h(r.value,2),l=i[0],s=i[1],d=Nt.findKey(t,l);o.push([s,d])}}catch(t){a.e(t)}finally{a.f()}return o},Vt=r((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});for(var n="undefined"!=typeof window&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),r={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},o={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:n?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},a={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=1;i<20;i++)a["f"+i]=111+i;function l(t,e,n){e&&!("byKey"in e)&&(n=e,e=null),Array.isArray(t)||(t=[t]);var r=t.map((function(t){return s(t,e)})),o=function(t){return r.some((function(e){return d(e,t)}))};return null==n?o:o(n)}function s(t,e){var n=e&&e.byKey,i={},l=(t=t.replace("++","+add")).split("+"),s=l.length;for(var d in r)i[r[d]]=!1;var c=!0,h=!1,p=void 0;try{for(var g,v=l[Symbol.iterator]();!(c=(g=v.next()).done);c=!0){var m=g.value,w=m.endsWith("?")&&m.length>1;w&&(m=m.slice(0,-1));var y=u(m),x=r[y];if(m.length>1&&!x&&!o[m]&&!a[y])throw new TypeError('Unknown modifier: "'+m+'"');1!==s&&x||(n?i.key=y:i.which=f(m)),x&&(i[x]=!w||null)}}catch(t){h=!0,p=t}finally{try{!c&&v.return&&v.return()}finally{if(h)throw p}}return i}function d(t,e){for(var n in t){var r=t[n],o=void 0;if(null!=r&&((null!=(o="key"===n&&null!=e.key?e.key.toLowerCase():"which"===n?91===r&&93===e.which?91:e.which:e[n])||!1!==r)&&o!==r))return!1}return!0}function f(t){return t=u(t),a[t]||t.toUpperCase().charCodeAt(0)}function u(t){return t=t.toLowerCase(),t=o[t]||t}e.default=l,e.isHotkey=l,e.isCodeHotkey=function(t,e){return l(t,e)},e.isKeyHotkey=function(t,e){return l(t,{byKey:!0},e)},e.parseHotkey=s,e.compareHotkey=d,e.toKeyCode=f,e.toKeyName=u}));n(Vt);var Gt=Vt.isHotkey;Vt.isCodeHotkey,Vt.isKeyHotkey,Vt.parseHotkey,Vt.compareHotkey,Vt.toKeyCode,Vt.toKeyName;var Yt={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},Xt={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},$t={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},Jt=function(t){var e=Yt[t],n=Xt[t],r=$t[t],o=e&&Gt(e),a=n&&Gt(n),i=r&&Gt(r);return function(t){return!(!o||!o(t))||(!!(j&&a&&a(t))||!(j||!i||!i(t)))}},Qt={isBold:Jt("bold"),isCompose:Jt("compose"),isMoveBackward:Jt("moveBackward"),isMoveForward:Jt("moveForward"),isDeleteBackward:Jt("deleteBackward"),isDeleteForward:Jt("deleteForward"),isDeleteLineBackward:Jt("deleteLineBackward"),isDeleteLineForward:Jt("deleteLineForward"),isDeleteWordBackward:Jt("deleteWordBackward"),isDeleteWordForward:Jt("deleteWordForward"),isExtendBackward:Jt("extendBackward"),isExtendForward:Jt("extendForward"),isExtendLineBackward:Jt("extendLineBackward"),isExtendLineForward:Jt("extendLineForward"),isItalic:Jt("italic"),isMoveLineBackward:Jt("moveLineBackward"),isMoveLineForward:Jt("moveLineForward"),isMoveWordBackward:Jt("moveWordBackward"),isMoveWordForward:Jt("moveWordForward"),isRedo:Jt("redo"),isSoftBreak:Jt("insertSoftBreak"),isSplitBlock:Jt("splitBlock"),isTransposeCharacter:Jt("transposeCharacter"),isUndo:Jt("undo")},Zt=r((function(t){t.exports=function(t,e){if(null==t)return{};var n,r,o={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(o[n]=t[n]);return o},t.exports.__esModule=!0,t.exports.default=t.exports}));n(Zt);var te=n(r((function(t){t.exports=function(t,e){if(null==t)return{};var n,r,o=Zt(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o},t.exports.__esModule=!0,t.exports.default=t.exports}))),ee=["anchor","focus"],ne=["anchor","focus"],re=function(t,e){t.anchor,t.focus;var n=te(t,ee);e.anchor,e.focus;var r,o,a=te(e,ne);return t[Tt]===e[Tt]&&(r=n,o=a,Object.keys(r).length===Object.keys(o).length&&Object.keys(r).every((function(t){return o.hasOwnProperty(t)&&r[t]===o[t]})))};t.CAN_USE_DOM=J,t.DOMEditor=Nt,t.DOMElement=y,t.DOMNode=w,t.DOMRange=E,t.DOMSelection=b,t.DOMStaticRange=O,t.DOMText=x,t.EDITOR_TO_ELEMENT=ut,t.EDITOR_TO_FORCE_RENDER=kt,t.EDITOR_TO_KEY_TO_ELEMENT=vt,t.EDITOR_TO_ON_CHANGE=Et,t.EDITOR_TO_PENDING_ACTION=_t,t.EDITOR_TO_PENDING_DIFFS=St,t.EDITOR_TO_PENDING_INSERTION_MARKS=Ot,t.EDITOR_TO_PENDING_SELECTION=Dt,t.EDITOR_TO_PLACEHOLDER_ELEMENT=ct,t.EDITOR_TO_SCHEDULE_FLUSH=bt,t.EDITOR_TO_USER_MARKS=Mt,t.EDITOR_TO_USER_SELECTION=xt,t.EDITOR_TO_WINDOW=ft,t.ELEMENT_TO_NODE=ht,t.HAS_BEFORE_INPUT_SUPPORT=Q,t.Hotkeys=Qt,t.IS_ANDROID=H,t.IS_CHROME=z,t.IS_COMPOSING=yt,t.IS_FIREFOX=K,t.IS_FIREFOX_LEGACY=Y,t.IS_FOCUSED=wt,t.IS_IOS=L,t.IS_NODE_MAP_DIRTY=lt,t.IS_READ_ONLY=mt,t.IS_UC_MOBILE=X,t.IS_WEBKIT=U,t.IS_WECHATBROWSER=$,t.Key=it,t.MARK_PLACEHOLDER_SYMBOL=Ct,t.NODE_TO_ELEMENT=pt,t.NODE_TO_INDEX=st,t.NODE_TO_KEY=gt,t.NODE_TO_PARENT=dt,t.PLACEHOLDER_SYMBOL=Tt,t.TRIPLE_CLICK=3,t.applyStringDiff=Rt,t.getActiveElement=function(){for(var t=document.activeElement;null!==(e=t)&&void 0!==e&&e.shadowRoot&&null!==(n=t.shadowRoot)&&void 0!==n&&n.activeElement;){var e,n,r;t=null===(r=t)||void 0===r||null===(r=r.shadowRoot)||void 0===r?void 0:r.activeElement}return t},t.getDefaultView=M,t.getSelection=W,t.hasShadowRoot=C,t.isAfter=F,t.isBefore=B,t.isDOMElement=S,t.isDOMNode=_,t.isDOMSelection=D,t.isElementDecorationsEqual=function(t,n){if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++){var o=t[r],a=n[r];if(!e.Range.equals(o,a)||!re(o,a))return!1}return!0},t.isPlainTextOnlyPaste=function(t){return t.clipboardData&&""!==t.clipboardData.getData("text/plain")&&1===t.clipboardData.types.length},t.isTextDecorationsEqual=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++){var r=t[n],o=e[n];if(r.anchor.offset!==o.anchor.offset||r.focus.offset!==o.focus.offset||!re(r,o))return!1}return!0},t.isTrackedMutation=function t(e,n,r){var o=n.target;if(S(o)&&o.matches('[contentEditable="false"]'))return!1;if(Nt.getWindow(e).document.contains(o))return Nt.hasDOMNode(e,o,{editable:!0});var a=r.find((function(t){var e,n=t.addedNodes,r=t.removedNodes,a=p(n);try{for(a.s();!(e=a.n()).done;){var i=e.value;if(i===o||i.contains(o))return!0}}catch(t){a.e(t)}finally{a.f()}var l,s=p(r);try{for(s.s();!(l=s.n()).done;){var d=l.value;if(d===o||d.contains(o))return!0}}catch(t){s.e(t)}finally{s.f()}}));return!(!a||a===n)&&t(e,a,r)},t.mergeStringDiffs=function(t,e,n){var r=Math.min(e.start,n.start),o=Math.max(0,Math.min(e.start+e.text.length,n.end)-n.start),a=Rt(t,e,n),i=Math.max(n.start+n.text.length,e.start+e.text.length+(e.start+e.text.length>n.start?n.text.length:0)-o),l=a.slice(r,i);return Pt(t,{start:r,end:Math.max(e.end,n.end-e.text.length+(e.end-e.start)),text:l})},t.normalizeDOMPoint=T,t.normalizePoint=At,t.normalizeRange=function(t,n){var r=At(t,n.anchor);if(!r)return null;if(e.Range.isCollapsed(n))return{anchor:r,focus:r};var o=At(t,n.focus);return o?{anchor:r,focus:o}:null},t.normalizeStringDiff=Pt,t.targetRange=function(t){var e=t.path,n=t.diff;return{anchor:{path:e,offset:n.start},focus:{path:e,offset:n.end}}},t.verifyDiffState=function(t,n){var r=n.path,o=n.diff;if(!e.Editor.hasPath(t,r))return!1;var a=e.Node.get(t,r);if(!e.Text.isText(a))return!1;if(o.start!==a.text.length||0===o.text.length)return a.text.slice(o.start,o.start+o.text.length)===o.text;var i=e.Path.next(r);if(!e.Editor.hasPath(t,i))return!1;var l=e.Node.get(t,i);return e.Text.isText(l)&&l.text.startsWith(o.text)},t.withDOM=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x-slate-fragment",r=t,o=r.apply,a=r.onChange,i=r.deleteBackward,l=r.addMark,s=r.removeMark;return vt.set(r,new WeakMap),r.addMark=function(t,e){var n,o;null===(n=bt.get(r))||void 0===n||n(),!Ot.get(r)&&null!==(o=St.get(r))&&void 0!==o&&o.length&&Ot.set(r,null),Mt.delete(r),l(t,e)},r.removeMark=function(t){var e;!Ot.get(r)&&null!==(e=St.get(r))&&void 0!==e&&e.length&&Ot.set(r,null),Mt.delete(r),s(t)},r.deleteBackward=function(t){if("line"!==t)return i(t);if(r.selection&&e.Range.isCollapsed(r.selection)){var n=e.Editor.above(r,{match:function(t){return e.Element.isElement(t)&&e.Editor.isBlock(r,t)},at:r.selection});if(n){var o=h(n,2)[1],a=e.Editor.range(r,o,r.selection.anchor),l=jt(r,a);e.Range.isCollapsed(l)||e.Transforms.delete(r,{at:l})}}},r.apply=function(n){var a=[],i=[],l=St.get(r);if(null!=l&&l.length){var s=l.map((function(t){return Bt(t,n)})).filter(Boolean);St.set(r,s)}var f=Dt.get(r);f&&Dt.set(r,Wt(r,f,n));var u=_t.get(r);if(null!=u&&u.at){var c=e.Point.isPoint(null==u?void 0:u.at)?It(r,u.at,n):Wt(r,u.at,n);_t.set(r,c?qt(qt({},u),{},{at:c}):null)}switch(n.type){case"insert_text":case"remove_text":case"set_node":case"split_node":a.push.apply(a,d(zt(r,n.path)));break;case"set_selection":var p;null===(p=xt.get(r))||void 0===p||p.unref(),xt.delete(r);break;case"insert_node":case"remove_node":a.push.apply(a,d(zt(r,e.Path.parent(n.path))));break;case"merge_node":var g=e.Path.previous(n.path);a.push.apply(a,d(zt(r,g)));break;case"move_node":var v,m=e.Path.common(e.Path.parent(n.path),e.Path.parent(n.newPath));a.push.apply(a,d(zt(r,m))),e.Path.isBefore(n.path,n.newPath)?(a.push.apply(a,d(zt(r,e.Path.parent(n.path)))),v=n.newPath):(a.push.apply(a,d(zt(r,e.Path.parent(n.newPath)))),v=n.path);var w=e.Node.get(t,e.Path.parent(v)),y=Nt.findKey(r,w),x=e.Editor.pathRef(r,e.Path.parent(v));i.push([x,y])}switch(o(n),n.type){case"insert_node":case"remove_node":case"merge_node":case"move_node":case"split_node":case"insert_text":case"remove_text":case"set_selection":lt.set(r,!0)}for(var E=0,b=a;E<b.length;E++){var O=h(b[E],2),M=O[0],S=O[1],_=e.Editor.node(r,M),D=h(_,1)[0];gt.set(D,S)}for(var k=0,T=i;k<T.length;k++){var C=h(T[k],2),N=C[0],R=C[1];if(N.current){var P=e.Editor.node(r,N.current),A=h(P,1)[0];gt.set(A,R)}N.unref()}},r.setFragmentData=function(t){var o=r.selection;if(o){var a=e.Range.edges(o),i=h(a,2),l=i[0],s=i[1],d=e.Editor.void(r,{at:l.path}),f=e.Editor.void(r,{at:s.path});if(!e.Range.isCollapsed(o)||d){var u=Nt.toDOMRange(r,o),c=u.cloneContents(),p=c.childNodes[0];if(c.childNodes.forEach((function(t){t.textContent&&""!==t.textContent.trim()&&(p=t)})),f){var g=h(f,1)[0],v=u.cloneRange(),m=Nt.toDOMNode(r,g);v.setEndAfter(m),c=v.cloneContents()}if(d&&(p=c.querySelector("[data-slate-spacer]")),Array.from(c.querySelectorAll("[data-slate-zero-width]")).forEach((function(t){var e="n"===t.getAttribute("data-slate-zero-width");t.textContent=e?"\n":""})),k(p)){var w=p.ownerDocument.createElement("span");w.style.whiteSpace="pre",w.appendChild(p),c.appendChild(w),p=w}var y=r.getFragment(),x=JSON.stringify(y),E=window.btoa(encodeURIComponent(x));p.setAttribute("data-slate-fragment",E),t.setData("application/".concat(n),E);var b=c.ownerDocument.createElement("div");return b.appendChild(c),b.setAttribute("hidden","true"),c.ownerDocument.body.appendChild(b),t.setData("text/html",b.innerHTML),t.setData("text/plain",P(b)),c.ownerDocument.body.removeChild(b),t}}},r.insertData=function(t){r.insertFragmentData(t)||r.insertTextData(t)},r.insertFragmentData=function(t){var e=t.getData("application/".concat(n))||I(t);if(e){var o=decodeURIComponent(window.atob(e)),a=JSON.parse(o);return r.insertFragment(a),!0}return!1},r.insertTextData=function(t){var n=t.getData("text/plain");if(n){var o,a=!1,i=Ht(n.split(/\r\n|\r|\n/));try{for(i.s();!(o=i.n()).done;){var l=o.value;a&&e.Transforms.splitNodes(r,{always:!0}),r.insertText(l),a=!0}}catch(t){i.e(t)}finally{i.f()}return!0}return!1},r.onChange=function(t){var e=Et.get(r);e&&e(t),a(t)},r}}));

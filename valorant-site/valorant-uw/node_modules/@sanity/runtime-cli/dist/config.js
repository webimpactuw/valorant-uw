import { env } from 'node:process';
import getToken from './utils/get-token.js';
const nodeEnv = env.SANITY_INTERNAL_ENV ?? 'production';
const isTest = nodeEnv === 'test';
const isDev = nodeEnv === 'development';
const useProd = nodeEnv === 'production';
const isPublishing = env?.PUBLISHING === 'true';
const apiUrls = {
    production: 'https://api.sanity.io/',
    staging: 'https://api.sanity.work/',
};
const apiUrl = new URL(apiUrls[nodeEnv] ?? apiUrls.production);
const functionsUrls = {
    production: apiUrl.toString(),
    staging: apiUrl.toString(),
    default: 'http://localhost:4567',
};
const blueprintsUrls = {
    production: apiUrl.toString(),
    staging: apiUrl.toString(),
    default: 'http://blueprints/',
};
const functionsUrl = new URL(functionsUrls[nodeEnv] ?? functionsUrls.default);
const blueprintsUrl = new URL(blueprintsUrls[nodeEnv] ?? blueprintsUrls.default);
const token = isDev || isTest || isPublishing ? 'token' : getToken({ prod: useProd });
export default {
    token,
    apiUrl,
    server: {
        functions: functionsUrl,
        blueprints: blueprintsUrl,
    },
};

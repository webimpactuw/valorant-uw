import { readFileSync } from 'node:fs';
import { tmpdir, userInfo } from 'node:os';
import { join } from 'node:path';
import { xdgConfig } from 'xdg-basedir';
export default function getToken({ prod = true }) {
    const environmentDir = prod ? 'sanity' : 'sanity-staging';
    const user = (userInfo().username || 'user').replace(/\\/g, '');
    const configDir = xdgConfig || join(tmpdir(), user, '.config');
    const configPath = join(configDir, environmentDir, 'config.json');
    const config = JSON.parse(readFileSync(configPath, 'utf8'));
    return config.authToken;
}

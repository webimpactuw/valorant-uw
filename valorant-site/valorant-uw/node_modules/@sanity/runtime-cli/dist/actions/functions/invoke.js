import config from '../../config.js';
import buildPayload from '../../utils/build-payload.js';
import getHeaders from '../../utils/get-headers.js';
const { functions } = config.server;
export async function invoke(id, options, auth) {
    const payload = buildPayload(options);
    const response = await fetch(`${functions}vX/functions/${id}/invoke`, {
        body: JSON.stringify({ data: payload }),
        headers: getHeaders(auth),
        method: 'POST',
    });
    const json = await response.json();
    return {
        ok: response.ok,
        error: response.ok ? null : json?.error?.message,
        json: response.ok ? json : undefined,
    };
}
